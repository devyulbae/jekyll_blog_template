---
layout: default
---

<div class="home-container">
    <!-- GitHub 활동 섹션 -->
    <section class="github-section">
        <h2>Github Contributions</h2>
        <div class="github-calendar">
            <!-- GitHub 캘린더가 로드될 컨테이너 -->
            <div class="calendar"></div>
        </div>
    </section>

    <!-- 인기 게시물 섹션 -->
    <section class="popular-posts">
        <h2>Popular Posts</h2>
        <div class="posts-grid">
            {% assign sorted_posts = site.posts | sort: "views" | reverse %}
            {% for post in sorted_posts limit:5 %}
            <article class="post-card">
                <div class="post-card-content">
                    <h3 class="post-title">
                        <a href="{{ post.url }}">{{ post.title }}</a>
                    </h3>
                    <div class="post-meta">
                        <span class="post-date">{{ post.date | date: "%Y-%m-%d" }}</span>
                        {% if post.categories.size > 0 %}
                        <span class="post-category">
                            <i class="fas fa-folder"></i> {{ post.categories | first }}
                        </span>
                        {% endif %}
                    </div>
                    <p class="post-excerpt">{{ post.excerpt | strip_html | truncatewords: 30 }}</p>
                </div>
            </article>
            {% endfor %}
        </div>
    </section>
</div>

<!-- GitHub Calendar CSS -->
<link rel="stylesheet" href="https://unpkg.com/github-calendar/dist/github-calendar-responsive.css"/>

<!-- GitHub Calendar JavaScript -->
<script src="https://unpkg.com/github-calendar/dist/github-calendar.min.js"></script>

<!-- 커스텀 툴팁 div 추가 -->
<div id="contribution-tooltip" class="contribution-tooltip" style="display: none;"></div>

<!-- Calendar 초기화 스크립트 -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tooltip = document.getElementById('contribution-tooltip');
        
        // GitHub Calendar 초기화
        GitHubCalendar(".calendar", "{{ site.author.social.github | split: '/' | last }}", {
            responsive: true
        });

        // DOM 변화 감지를 위한 MutationObserver 설정
        const observer = new MutationObserver((mutations, obs) => {
            const days = document.querySelectorAll('rect.ContributionCalendar-day');
            
            if (days.length > 0) {
                days.forEach(day => {
                    day.addEventListener('mouseenter', (e) => {
                        const count = day.getAttribute('data-count');
                        const date = day.getAttribute('data-date');
                        
                        if (count && date) {
                            const formattedDate = new Date(date).toLocaleDateString('ko-KR', {
                                year: 'numeric',
                                month: 'long',
                                day: 'numeric'
                            });
                            
                            tooltip.textContent = `${formattedDate}: ${count}개의 기여`;
                            tooltip.style.display = 'block';
                            
                            const rect = e.target.getBoundingClientRect();
                            tooltip.style.left = `${rect.left + window.scrollX}px`;
                            tooltip.style.top = `${rect.top + window.scrollY - 40}px`;
                        }
                    });

                    day.addEventListener('mouseleave', () => {
                        tooltip.style.display = 'none';
                    });
                });
                
                // 이벤트 리스너 추가 완료 후 observer 중지
                obs.disconnect();
            }
        });

        // calendar 요소의 변화 감지 시작
        observer.observe(document.querySelector('.calendar'), {
            childList: true,
            subtree: true
        });
    });
</script> 